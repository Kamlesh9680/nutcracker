<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Video Player - NutCracker</title>
    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/responsive.css">
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <script type='text/javascript'
        src='//groundlesscobwebmiller.com/98/ef/66/98ef66ad81a8169367108092544a0c46.js'></script>
</head>

<body>
    <div class="page-wrapper">
        <header class="header">
            <div class="header-wrapper">
                <div class="logo"><img src="/assets/images/logo.svg" alt="logo">
                    <h2>NutCracker</h2>
                </div>
                <div class="nav">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/upload">Upload</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <main class="play">
            <div class="video-wrapper">
                <div class="video-container">
                    <video id="my-video" class="video-js vjs-default-skin" controls preload="auto" width="760"
                        height="400" data-setup="{}">
                        <p class="vjs-no-js">
                            To view this video please enable JavaScript, and consider upgrading to a web browser that
                            <a href="https://videojs.com/html5-video-support/" target="_blank" rel="noopener">supports
                                HTML5
                                video</a>
                        </p>
                    </video>
                </div>
                <div class="report-and-user">
                    <div class="user-info">
                        <i class="ri-user-fill"></i>
                        <h4>Uploaded By:</h4>
                        <p>
                            <%= relatedUser %>
                        </p>
                    </div>
                    <div class="report-button">
                        <a href="https://t.me/NetCracker_live">Report</a>
                    </div>
                </div>
            </div>
            <script async="async" data-cfasync="false"
                src="//groundlesscobwebmiller.com/ef32c4b735be68cb1103be43200d35e1/invoke.js"></script>
            <div id="container-ef32c4b735be68cb1103be43200d35e1"></div>

            <div class="text-content">
                <h4>News:</h4>
                <p>In the realm of international news, certain topics tend to dominate headlines and capture widespread
                    attention. Geopolitical developments, such as diplomatic negotiations, conflicts, and international
                    summits, often draw significant interest as they shape global relations and impact multiple
                    countries. Humanitarian crises, including natural disasters, refugee movements, and healthcare
                    emergencies, elicit empathetic responses and prompt calls for international aid and solidarity.
                    Economic news, such as market fluctuations, trade agreements, and economic policies, reverberates
                    across borders, influencing global financial stability and individual livelihoods. Technological
                    advancements and innovations, particularly in areas like artificial intelligence, space exploration,
                    and renewable energy, captivate audiences worldwide as they hold the potential to reshape societies
                    and economies. Additionally, environmental issues, such as climate change, biodiversity loss, and
                    natural resource management, garner widespread concern as they pose existential threats to the
                    planet and require coordinated action on a global scale. Amidst this array of topics, stories that
                    resonate with universal human experiences, promote cross-cultural understanding, and inspire
                    positive change often rise to prominence, reflecting the interconnectedness of our increasingly
                    globalized world.</p>
                <script
                    type="text/javascript"> 	atOptions = { 'key': '4e8c1f962a91533eab04b3af743a5989', 'format': 'iframe', 'height': 90, 'width': 728, 'params': {} }; </script>
                <script type="text/javascript"
                    src="//groundlesscobwebmiller.com/4e8c1f962a91533eab04b3af743a5989/invoke.js"></script>
                <p>The morning sun crept over the horizon, casting its golden rays across the sleepy town nestled in the
                    valley below. The streets gradually stirred to life as people emerged from their homes, their
                    footsteps echoing against the cobblestone pavement. The aroma of freshly brewed coffee wafted
                    through the air, mingling with the sweet scent of blooming flowers that adorned the storefronts. It
                    was a picturesque scene, reminiscent of a bygone era, where time seemed to slow down and moments
                    lingered like the morning mist. As I strolled through the quaint streets, I couldn't help but marvel
                    at the charm and tranquility that enveloped the town. Each building told a story, each alleyway
                    whispered secrets of days gone by. It was a place where history and modernity coexisted in perfect
                    harmony, where the past seamlessly intertwined with the present. From the bustling town square to
                    the tranquil parks dotted with ancient oaks, every corner held a promise of discovery and adventure.
                    And as I basked in the warmth of the morning sun, I couldn't help but feel grateful for the simple
                    beauty of this quaint little town and the memories it held.
                </p>
                <script
                    type="text/javascript"> 	atOptions = { 'key': '4e8c1f962a91533eab04b3af743a5989', 'format': 'iframe', 'height': 90, 'width': 728, 'params': {} }; </script>
                <script type="text/javascript"
                    src="//groundlesscobwebmiller.com/4e8c1f962a91533eab04b3af743a5989/invoke.js"></script>
                <p>The ancient ruins stood silent and still, their weathered stones bearing testament to a forgotten era
                    of glory and grandeur. Moss clung to crumbling walls, vines snaked their way through cracked
                    archways, and time seemed to stand still amidst the ruins of a once-mighty civilization. It was a
                    hauntingly beautiful sight, evoking a sense of wonder and reverence for the generations that had
                    come before. As I traced my fingers along the weathered stones, I couldn't help but marvel at the
                    resilience of the human spirit, capable of building such magnificent structures and yet so fleeting
                    in the grand scheme of history.
                </p>
                <script
                    type="text/javascript"> 	atOptions = { 'key': '4e8c1f962a91533eab04b3af743a5989', 'format': 'iframe', 'height': 90, 'width': 728, 'params': {} }; </script>
                <script type="text/javascript"
                    src="//groundlesscobwebmiller.com/4e8c1f962a91533eab04b3af743a5989/invoke.js"></script>
                <p>Calling all adrenaline junkies! If you're craving an adventure that will get your heart racing and
                    your adrenaline pumping, look no further than these top 5 destinations. From skydiving over
                    breathtaking landscapes to diving with sharks in exotic waters, these adrenaline-fueled experiences
                    are not for the faint of heart. Whether you're an experienced thrill-seeker or a newbie looking for
                    your next challenge, these destinations offer something for everyone. Pack your bags, buckle up, and
                    get ready for the adventure of a lifetime!</p>
            </div>
        </main>
        <footer class="footer">
            <div class="footer-wrapper">
                <div class="footer-txt">
                    <p>Â© 2024 NutCracker | All rights reserved.</p>
                </div>
                <div class="footer-links">
                    <a href="/terms">Terms and Conditions</a>
                </div>
            </div>
        </footer>
    </div>


    <script src="https://vjs.zencdn.net/7.14.3/video.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.6.5/videojs.ads.min.js"></script>
    <script src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var player = videojs('my-video');
            var source = {
                src: '/uploads/<%= filename %>',
                type: 'video/mp4'
            };
            player.src(source);

            var viewed = false;

            player.on('play', function () {
                if (!viewed) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', '/update-view/<%= uniqueLink %>', true);
                    xhr.send();
                    viewed = true;
                }
            });

            player.on('ended', function () {
                viewed = false;
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            console.log("DOM Content Loaded");

            var player = videojs("my-video");
            console.log("Video.js player initialized");

            var vastTagPreroll = "https://www.videosprofitnetwork.com/watch.xml?key=f6cb54cabfbf77bb2d615b9eacb3f58b";
            var vastTagMidroll = "https://www.videosprofitnetwork.com/watch.xml?key=f6cb54cabfbf77bb2d615b9eacb3f58b";
            var vastTagPostroll = "https://www.videosprofitnetwork.com/watch.xml?key=f6cb54cabfbf77bb2d615b9eacb3f58b";
            var prerollTriggered = false;
            var postrollTriggered = false;
            var midrollRequested = false;
            var midrollInterval = 30 * 60; // 5 minutes
            var lastMidrollTime = 0; // The time when the last mid-roll ad was played

            if (!prerollTriggered) {
                player.ima({
                    adTagUrl: vastTagPreroll,
                    showControlsForAds: true,
                    debug: false,
                });
            } else {
                player.ima({
                    adTagUrl: '',
                    showControlsForAds: true,
                    debug: false,
                });
            }
            console.log("IMA settings configured");

            player.ima.initializeAdDisplayContainer();
            console.log("IMA ad display container initialized");

            function requestMidrollAd() {
                midrollRequested = true;
                player.ima.changeAdTag(vastTagMidroll);
                player.ima.requestAds();
            }

            player.on("timeupdate", function () {
                var currentTime = player.currentTime();
                console.log("Current time:", currentTime);
                var timeSinceLastMidroll = currentTime - lastMidrollTime;

                if (timeSinceLastMidroll >= midrollInterval && !midrollRequested) {
                    lastMidrollTime = currentTime; // Update the last mid-roll ad time
                    console.log("Midroll triggered");
                    requestMidrollAd();
                }
            });

            player.on("ended", function () {
                console.log("Video ended");
                if (!postrollTriggered) {
                    postrollTriggered = true;
                    console.log("Postroll triggered");

                    player.ima.requestAds({
                        adTagUrl: vastTagPostroll,
                    });

                    console.log("Postroll ads requested");
                }
            });

            player.on("adsready", function () {
                if (midrollRequested) {
                    console.log("Ads ready - midroll");
                } else {
                    console.log("Ads ready - preroll");
                    // player.src(
                    //     "path/to/your/video.mp4"
                    // );
                }
            });

            player.on("aderror", function () {
                console.log("Ads aderror");
                player.play();
            });

            player.on("adend", function () {
                if (lastMidrollTime > 0) {
                    console.log("A midroll ad has finished playing.");
                    midrollRequested = false;
                } else {
                    console.log("The preroll ad has finished playing.");
                    prerollTriggered = true;
                }
                player.play();
            });
        });
    </script>
    <script type='text/javascript'
        src='//groundlesscobwebmiller.com/34/79/3e/34793efebb9ae76ea8c5550a1b99c9d2.js'></script>
</body>

</html>