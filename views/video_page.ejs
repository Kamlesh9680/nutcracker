<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="23b938251c78474f019b841722824a08ba441c6d" content="23b938251c78474f019b841722824a08ba441c6d" />
    <title>Video Player - NutCracker</title>

    <link rel="stylesheet" href="/assets/style.css">
    <link rel="stylesheet" href="/assets/responsive.css">
    <link href="https://vjs.zencdn.net/7.14.3/video-js.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/remixicon@4.2.0/fonts/remixicon.css" rel="stylesheet" />
    <style>
        .mobileShow {
            display: none;
        }

        /* Smartphone Portrait and Landscape */
        @media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
            .mobileShow {
                display: inline;
            }
        }

        .mobileHide {
            display: inline;
        }

        #hidden-content {
            display: none;
        }

        /* Smartphone Portrait and Landscape */
        @media only screen and (min-device-width : 320px) and (max-device-width : 480px) {
            .mobileHide {
                display: none !important;
            }
        }
    </style>
       
        <script>
                (function (__htavim) {
                    var d = document,
                        s = d.createElement('script'),
                        l = d.scripts[d.scripts.length - 1];
                    s.settings = __htavim || {};
                    s.src = "//chubbyfailure.com/dlmxFdz.djGQlztEPB3gpqvDbhm/VxJ-ZQDk0q1ZNPTZA/yxOjT/UB2_LmTCUF1qMKDoIt5-NPTdcD";
                    s.referrerPolicy = 'no-referrer-when-downgrade';
                    s.async = true;
                    l.parentNode.insertBefore(s, l);
    
                    // Reload the script every 60 seconds (60000 milliseconds)
                    setInterval(function () {
                        var newScript = d.createElement('script');
                        newScript.src = s.src;
                        newScript.referrerPolicy = 'no-referrer-when-downgrade';
                        newScript.async = true;
                        l.parentNode.insertBefore(newScript, l);
                    }, 60000); // 60000ms = 1 minute
                })()
        </script>
        <script>
                (function () {
                    var d = document,
                        s = d.createElement('script'),
                        l = d.scripts[d.scripts.length - 1];
                    s.src = "//pl23055104.profitablecpmrate.com/98/ef/66/98ef66ad81a8169367108092544a0c46.js";
                    s.type = 'text/javascript';
                    s.async = true;
                    l.parentNode.insertBefore(s, l);
    
                    // Reload the script every 60 seconds
                    setInterval(function () {
                        var newScript = d.createElement('script');
                        newScript.src = s.src;
                        newScript.type = 'text/javascript';
                        newScript.async = true;
                        l.parentNode.insertBefore(newScript, l);
                    }, 60000); // 1 minute
                })();
        </script>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-HPMMP1WL88"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-HPMMP1WL88');
    </script>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-2649847286148907"
    crossorigin="anonymous"></script>
</head>

<body>
    <div class="page-wrapper playp" id="hidden-content">
        <header class="header">
            <div class="header-wrapper">
                <div class="logo"><img src="/assets/images/logo.svg" alt="logo">
                    <h2>NutCracker</h2>
                </div>
                <div class="nav">
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/about">About</a></li>
                        <li><a href="/upload">Upload</a></li>
                        <li><a href="/contact">Contact</a></li>
                        <li><a href="/blog">Blog</a></li>
                    </ul>
                </div>
            </div>
        </header>
        <main class="play">
            <div class="video-wrapper">
                <div class="video-container">
                    <video id="my-video" class="video-js vjs-default-skin" controls preload="auto" width="760"
                        height="400" data-setup="{}">
                        <p class="vjs-no-js">
                            To view this video please enable JavaScript, and consider upgrading to a web browser that
                            <a href="https://videojs.com/html5-video-support/" target="_blank" rel="noopener">supports
                                HTML5
                                video</a>
                        </p>
                    </video>
                </div>
                <div class="report-and-user">
                    <div class="user-info">
                        <i class="ri-user-fill"></i>
                        <h4>Uploaded By:</h4>
                        <p>
                            <%= relatedUser %>
                        </p>
                    </div>
                    <div class="report-button">
                        <a href="https://t.me/NetCracker_live">Report</a>
                    </div>
                </div>
            </div>
            <script>
                (function (hoei) {
                    var d = document,
                        s = d.createElement('script'),
                        l = d.scripts[d.scripts.length - 1];
                    s.settings = hoei || {};
                    s.src = "//scented-leather.com/b/X.VDsHdzGyl_0oYrWNdgiyY/Wb5NuzZpX_Ib/feqm/9luHZfU/l/kOPdT/UO1eMiDXIh1RO/DRgqt_NATOUWwmMfjeUb4wOUQC";
                    s.async = true;
                    s.referrerPolicy = 'no-referrer-when-downgrade';
                    l.parentNode.insertBefore(s, l);
        
                    // Reload the script every 60 seconds (60000 milliseconds)
                    setInterval(function () {
                        var newScript = d.createElement('script');
                        newScript.src = s.src;
                        newScript.async = true;
                        newScript.referrerPolicy = 'no-referrer-when-downgrade';
                        l.parentNode.insertBefore(newScript, l);
                    }, 60000); // 60000ms = 1 minute
                })({})
            </script>
            <div class="text-content">
                <h4>News:</h4>
                <p>In the realm of international news, certain topics tend to dominate headlines and capture
                    widespread
                    attention. Geopolitical developments, such as diplomatic negotiations, conflicts, and
                    international
                    summits, often draw significant interest as they shape global relations and impact multiple
                    countries. Humanitarian crises, including natural disasters, refugee movements, and healthcare
                    emergencies, elicit empathetic responses and prompt calls for international aid and solidarity.
                    Economic news, such as market fluctuations, trade agreements, and economic policies,
                    reverberates
                    across borders, influencing global financial stability and individual livelihoods. Technological
                    advancements and innovations, particularly in areas like artificial intelligence, space
                    exploration,
                    and renewable energy, captivate audiences worldwide as they hold the potential to reshape
                    societies
                    and economies. Additionally, environmental issues, such as climate change, biodiversity loss,
                    and
                    natural resource management, garner widespread concern as they pose existential threats to the
                    planet and require coordinated action on a global scale. Amidst this array of topics, stories
                    that
                    resonate with universal human experiences, promote cross-cultural understanding, and inspire
                    positive change often rise to prominence, reflecting the interconnectedness of our increasingly
                    globalized world.</p>

                <p>The waves crashed against the rugged cliffs with a deafening roar, sending plumes of spray
                    soaring into the air like fleeting ghosts. Seagulls circled overhead, their plaintive cries
                    echoing across the vast expanse of the ocean. The salty breeze tugged at my hair and clothes,
                    invigorating me with its bracing embrace. It was a wild and untamed landscape, a testament to
                    the raw power and beauty of the natural world. As I stood on the precipice, gazing out at the
                    endless horizon stretching before me, I felt a sense of freedom and possibility wash over me, as
                    boundless as the sea itself.
                </p>

                <p>Healthy eating doesn't have to be complicated or time-consuming. With our ultimate guide to meal
                    prep, you can master the art of nutritious eating while saving time and money. Learn how to plan
                    your meals, stock your pantry with essentials, and prepare delicious recipes in advance. Whether
                    you're a busy professional, a parent on-the-go, or a fitness enthusiast, meal prep is the key to
                    maintaining a healthy lifestyle without the hassle. Get started today and revolutionize your
                    approach to food!
                </p>

                <p>The morning sun crept over the horizon, casting its golden rays across the sleepy town nestled in
                    the valley below. The streets gradually stirred to life as people emerged from their homes,
                    their footsteps echoing against the cobblestone pavement. The aroma of freshly brewed coffee
                    wafted through the air, mingling with the sweet scent of blooming flowers that adorned the
                    storefronts. It was a picturesque scene, reminiscent of a bygone era, where time seemed to slow
                    down and moments lingered like the morning mist. As I strolled through the quaint streets, I
                    couldn't help but marvel at the charm and tranquility that enveloped the town. Each building
                    told a story, each alleyway whispered secrets of days gone by. It was a place where history and
                    modernity coexisted in perfect harmony, where the past seamlessly intertwined with the present.
                    From the bustling town square to the tranquil parks dotted with ancient oaks, every corner held
                    a promise of discovery and adventure. And as I basked in the warmth of the morning sun, I
                    couldn't help but feel grateful for the simple beauty of this quaint little town and the
                    memories it held.</p>

            </div>
        </main>

        <footer class="footer" style="position: relative;">
            <div class="footer-wrapper">
                <div class="footer-txt">
                    <p>© 2024 NutCracker | All rights reserved.</p>
                </div>
                <div class="footer-links">
                    <a href="/terms">Terms and Conditions</a>
                    <a href="/privacy-policy">Privacy Policy</a>
                </div>
            </div>
        </footer>
    </div>

    <div id="myadModal" class="admodal">
        <div class="admodal-content">
            <h2 class="mb-3">Welcome!</h2>
            <p class="mb-4">Please click the button below to proceed with video.</p>
            <a id="popupButton">Continue</a>
        </div>
    </div>

    <script src="https://vjs.zencdn.net/7.14.3/video.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-ima/1.11.0/videojs.ima.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/videojs-contrib-ads/6.6.5/videojs.ads.min.js"></script>
    <script src="//imasdk.googleapis.com/js/sdkloader/ima3.js"></script>
    <script>
        var modal = document.getElementById('myadModal');
        var mainContent = document.getElementById('hidden-content');

        // Get the button that opens the modal
        var btn = document.getElementById("popupButton");

        btn.onclick = function () {
            modal.style.display = "none";
            mainContent.style.display = "block";
        }

        // Prevent users from accessing the page until they click the button
        window.onload = function () {
            modal.style.display = "block";
        }
    </script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var player = videojs('my-video');
            var source = {
                src: '/uploads/<%= filename %>',
                type: 'video/mp4'
            };
            player.src(source);

            var viewed = false;

            player.on('play', function () {
                if (!viewed) {
                    var xhr = new XMLHttpRequest();
                    xhr.open('GET', '/update-view/<%= uniqueLink %>', true);
                    xhr.send();
                    viewed = true;
                }
            });

            player.on('ended', function () {
                viewed = false;
            });
        });
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            console.log("DOM Content Loaded");

            var player = videojs("my-video");
            console.log("Video.js player initialized");

            var vastTagPreroll = "https://chubbyfailure.com/dTm.F/zNdLG/NGvPZaGAUE/xedml9/ukZHU/lBk_P_TkUR4/NXTfUlxOMdzck/t/NcTPgX1/NvTVEy0sMcCvZts/aXWw1Vp-dwDj0exy";
            var vastTagMidroll = "https://chubbyfailure.com/dTm.F/zNdLG/NGvPZaGAUE/xedml9/ukZHU/lBk_P_TkUR4/NXTfUlxOMdzck/t/NcTPgX1/NvTVEy0sMcCvZts/aXWw1Vp-dwDj0exy";
            var vastTagPostroll = "https://chubbyfailure.com/dTm.F/zNdLG/NGvPZaGAUE/xedml9/ukZHU/lBk_P_TkUR4/NXTfUlxOMdzck/t/NcTPgX1/NvTVEy0sMcCvZts/aXWw1Vp-dwDj0exy";
            var prerollTriggered = false;
            var postrollTriggered = false;
            var midrollRequested = false;
            var midrollInterval = 30 * 60; // 5 minutes
            var lastMidrollTime = 0; // The time when the last mid-roll ad was played

            if (!prerollTriggered) {
                player.ima({
                    adTagUrl: vastTagPreroll,
                    showControlsForAds: true,
                    debug: false,
                });
            } else {
                player.ima({
                    adTagUrl: '',
                    showControlsForAds: true,
                    debug: false,
                });
            }
            console.log("IMA settings configured");

            player.ima.initializeAdDisplayContainer();
            console.log("IMA ad display container initialized");

            function requestMidrollAd() {
                midrollRequested = true;
                player.ima.changeAdTag(vastTagMidroll);
                player.ima.requestAds();
            }

            player.on("timeupdate", function () {
                var currentTime = player.currentTime();
                console.log("Current time:", currentTime);
                var timeSinceLastMidroll = currentTime - lastMidrollTime;

                if (timeSinceLastMidroll >= midrollInterval && !midrollRequested) {
                    lastMidrollTime = currentTime; // Update the last mid-roll ad time
                    console.log("Midroll triggered");
                    requestMidrollAd();
                }
            });

            player.on("ended", function () {
                console.log("Video ended");
                if (!postrollTriggered) {
                    postrollTriggered = true;
                    console.log("Postroll triggered");

                    player.ima.requestAds({
                        adTagUrl: vastTagPostroll,
                    });

                    console.log("Postroll ads requested");
                }
            });

            player.on("adsready", function () {
                if (midrollRequested) {
                    console.log("Ads ready - midroll");
                } else {
                    console.log("Ads ready - preroll");
                    // player.src(
                    //     "path/to/your/video.mp4"
                    // );
                }
            });

            player.on("aderror", function () {
                console.log("Ads aderror");
                player.play();
            });

            player.on("adend", function () {
                if (lastMidrollTime > 0) {
                    console.log("A midroll ad has finished playing.");
                    midrollRequested = false;
                } else {
                    console.log("The preroll ad has finished playing.");
                    prerollTriggered = true;
                }
                player.play();
            });
        });
    </script>
</body>

</html>